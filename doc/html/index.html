<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>B52 - Projet 2: Présentation du projet 2</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ShuttleIcon_128x128.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">B52 - Projet 2
   </div>
   <div id="projectbrief">Éditeur de navette spatiale.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Présentation du projet 2 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro"></a>
Introduction</h1>
<p>Le deuxième projet du cours consiste à concevoir et développer un logiciel faisant l'édition d'un véhicule spatiale.</p>
<h1><a class="anchor" id="specific_objective"></a>
Objectifs spécifiques</h1>
<p>Vous devez créer un éditeur permettant de définir ces caractéristiques :</p><ul>
<li>véhicule spatiale :<ul>
<li>paramètres généraux :<ul>
<li>forme et apparence visuelle;</li>
<li>caractéristiques physiques;</li>
<li>contrôleur;</li>
</ul>
</li>
<li>réservoir de carburant :<ul>
<li>apparence;</li>
<li>position sur le véhicule;</li>
<li>capacité et niveau;</li>
</ul>
</li>
<li>propulseurs :<ul>
<li>nombre de propulseurs;</li>
<li>forme et apparence;</li>
<li>position sur le véhicule;</li>
<li>puissance;</li>
<li>réservoir lié;</li>
<li>contrôleur.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="educational_goals"></a>
Objectifs pédagogiques</h1>
<p>Ce projet vise le développement des compétences suivantes :</p><ul>
<li>familiarisation plus avancées avec les notions orientées objets</li>
<li>faire la conception et le développement en gardant en tête que les données devront transiger par une base de données</li>
<li>analyse et conception d'une interface utilisateur graphique</li>
<li>identification des données pertinentes pour une telle application</li>
<li>approfondissement des connaissances liés aux outils informatiques du projet : C++ et Qt notamment</li>
<li>utilisation d'une librairie supplémentaire</li>
</ul>
<h1><a class="anchor" id="constraints"></a>
Contraintes</h1>
<p>Plusieurs contraintes doivent être respectées :</p><ul>
<li>le projet doit être réalisé en équipe :<ul>
<li>les équipes doivent être de deux ou trois étudiants;</li>
<li>aucun étudiant ne pourra réaliser le projet seul;</li>
<li>la charge de travail attendue est proportionnelle à la taille de chaque équipe;</li>
<li><b>la formation des équipes doit se faire collectivement</b> afin qu'un équilibre satisfaisant soit atteint pour le niveau des étudiants de chaque équipe.</li>
</ul>
</li>
<li>outils technologiques à utiliser :<ul>
<li>vous devez utiliser le langage de programmation C++ ainsi que la librairie Qt;</li>
<li>vous devez utiliser Visual Studio;</li>
<li>vous devez utiliser la librairie mise à votre disposition par l'enseignant dont la documentation est justement présenté par ce document (les fichiers <code>SpaceShuttleLib</code>);</li>
<li>vous devez produire une interface utilisateur par programmation sans utiliser le Qt Designer;</li>
</ul>
</li>
</ul>
<p>vous avez une semaine pour réaliser ce travail.</p>
<h1><a class="anchor" id="additional_info"></a>
Informations complémentaires</h1>
<h2><a class="anchor" id="step_1"></a>
Structure d'une navette</h2>
<p>Le schéma suivant montre les différentes parties d'une navette ainsi que leurs interrelations.  <style>div.image img[src="SchemaConceptuel.png"]{width:600px;}</style>  </p><div class="image">
<img src="SchemaConceptuel.png" alt="SchemaConceptuel.png"/>
<div class="caption">
Schéma conceptuel de la navette</div></div>
<p> Tel qu'illustré, le véhicule spatiale possède plusieurs paramètres rendant la simulation plus intéressante. Néanmoins, plusieurs éléments sont à considérer :</p><ul>
<li><a class="el" href="class_q_scene_model.html" title="QSceneModel est le modèle de la simulation. ">QSceneModel</a> : Un monde doit être créé pour supporter toute la simulation. Pour faire un parallèle avec le <em>MVC</em>, ce monde est le modèle du logiciel. Il doit être créé par le programmeur et être référé à plusieurs endroits dans le programme.</li>
<li><a class="el" href="class_q_scene_view_controller.html" title="QSceneViewController est l&#39;équivalent de la vue et du controlleur de la simulation. ">QSceneViewController</a> : Une vue / contrôleur servant d'interface entre l'utilisateur et la simulation doit aussi être créée. Encore une fois, pour faire le parallèle avec <em>MVC</em>, cette classe correspond à la fois à la vue et au contrôleur. Cette classe doit être liée au modèle. Cette classe est aussi un widget qui sera affiché directement à l'écran.</li>
<li><a class="el" href="class_q_shuttle.html" title="QShuttle est une classe décrivant une navette naviguant dans l&#39;espace 2d. ">QShuttle</a> : La navette possède plusieurs constituants offrant beaucoup de flexibilité. Elle doit cependant être ajouté au modèle pour participer à la simulation. La navette possède :<ul>
<li><a class="el" href="class_q_polygonal_body.html" title="QPolygonalBody est une classe de forme polygonale utilisable par QPhysicalBody. ">QPolygonalBody</a> : Une forme permet de déterminer les attributs physiques et visuels de la navette.</li>
<li><a class="el" href="class_q_shuttle_keyboard_controller.html">QShuttleKeyboardController</a> : Ce contrôleur permet de contrôler la navette. Il passe les instructions aux contrôleurs de propulseur.</li>
<li><a class="el" href="class_q_shuttle_fuel_tank.html" title="QShuttleFuelTank est une classe représetant un réservoir d&#39;une navette. ">QShuttleFuelTank</a> : Le réservoir permet de contenir et distribuer le carburant nécessaire aux propulseurs.</li>
<li><a class="el" href="class_q_shuttle_fuel_tank_shape.html">QShuttleFuelTankShape</a> : La forme du réservoir est forcée et assignée automatiquement. Néanmoins, il importe de pouvoir la déterminer.</li>
<li><a class="el" href="class_q_shuttle_thruster.html" title="QShuttleThruster est une classe représentant le propulseur d&#39;une navette. ">QShuttleThruster</a> : Une navette peut contenir <em>n</em> propulseurs afin de pouvoir la pousser et la diriger.</li>
<li><a class="el" href="class_q_polygonal_body.html" title="QPolygonalBody est une classe de forme polygonale utilisable par QPhysicalBody. ">QPolygonalBody</a> : Les propulseurs définissent leur forme ainsi.</li>
<li><a class="el" href="class_q_thruster_keyboard_controller.html">QThrusterKeyboardController</a> : Ce contrôleur permet le contrôle de chaque propulseur.</li>
</ul>
</li>
</ul>
<p>La présente documentation présente le détail de tous ces éléments. Une lecture de cette documentation est essentielle au projet.</p>
<h2><a class="anchor" id="editor"></a>
Éditeur</h2>
<p>Vous avez pleine liberté pour la création de l'éditeur. Néanmoins, vous devez permettre un maximum de configuration possible. Le schéma suivant montre un concept général de cette interface.  <style>div.image img[src="GeneralMockups.png"]{width:800px;}</style>  </p><div class="image">
<img src="GeneralMockups.png" alt="GeneralMockups.png"/>
<div class="caption">
Schéma conceptuel de l'interface utilisateur de l'éditeur</div></div>
<p> N'oubliez pas que la suite du projet consiste à lier tous ces paramètres avec une base de données.</p>
<p>À titre d'exemple, vous pouvez vous inspirer de cette interface utilisateur.  <style>div.image img[src="EditorExample01.png"]{width:800px;}</style>  </p><div class="image">
<img src="EditorExample01.png" alt="EditorExample01.png"/>
<div class="caption">
Exemple d'interface utilisateur : définition de la navette</div></div>
<p>  <style>div.image img[src="EditorExample02.png"]{width:800px;}</style>  </p><div class="image">
<img src="EditorExample02.png" alt="EditorExample02.png"/>
<div class="caption">
Exemple d'interface utilisateur : définition du réservoir</div></div>
<p>  <style>div.image img[src="EditorExample03.png"]{width:800px;}</style>  </p><div class="image">
<img src="EditorExample03.png" alt="EditorExample03.png"/>
<div class="caption">
Exemple d'interface utilisateur : définition des propulseurs</div></div>
<p>  <style>div.image img[src="EditorExample04.png"]{width:800px;}</style>  </p><div class="image">
<img src="EditorExample04.png" alt="EditorExample04.png"/>
<div class="caption">
Exemple d'interface utilisateur : tests et simulation</div></div>
 <h2><a class="anchor" id="supplementary_widgets"></a>
Widgets supplémentaires</h2>
<p>Vous avez à votre disposition quelques widgets supplémentaires :</p><ul>
<li><a class="el" href="class_q_scene_view_controller.html" title="QSceneViewController est l&#39;équivalent de la vue et du controlleur de la simulation. ">QSceneViewController</a> : widget permettant de voir la scène et d'interagir avec le modèle.  <style>div.image img[src="QSceneViewController.png"]{width:400px;}</style>  <div class="image">
<img src="QSceneViewController.png" alt="QSceneViewController.png"/>
<div class="caption">
QSceneViewController</div></div>
</li>
<li><a class="el" href="class_q_int_value_box.html" title="QIntValueBox est un widget composé de QScrollBar et QSpinBox facilitant l&#39;intéraction avec l&#39;usager p...">QIntValueBox</a> : widget facilitant la manipulation d'un nombre entier  <style>div.image img[src="QIntValueBox.png"]{height:27px;}</style>  <div class="image">
<img src="QIntValueBox.png" alt="QIntValueBox.png"/>
<div class="caption">
QIntValueBox</div></div>
</li>
<li><a class="el" href="class_q_real_value_box.html" title="QRealValueBox est un widget composé de QScrollBar et QDoubleSpinBox facilitant l&#39;intéraction avec l&#39;u...">QRealValueBox</a> : widget facilitant la manipulation d'un nombre à point flottant  <style>div.image img[src="QRealValueBox.png"]{height:25px;}</style>  <div class="image">
<img src="QRealValueBox.png" alt="QRealValueBox.png"/>
<div class="caption">
QRealValueBox</div></div>
</li>
<li><a class="el" href="class_q_color_box.html" title="QColorBox est un widget permettant l&#39;interaction d&#39;une couleur. ">QColorBox</a> : widget facilitant la manipulation d'une couleur  <style>div.image img[src="QColorBox.png"]{height:22px;}</style>  <div class="image">
<img src="QColorBox.png" alt="QColorBox.png"/>
<div class="caption">
QColorBox</div></div>
</li>
<li><a class="el" href="class_q_polygon_editor.html" title="QPolygonEditor est un widget permettant la définition interactive d&#39;un polygone. ">QPolygonEditor</a> : widget facilitant la manipulation d'un polygone  <style>div.image img[src="QPolygonEditor.png"]{width:500px;}</style>  <div class="image">
<img src="QPolygonEditor.png" alt="QPolygonEditor.png"/>
<div class="caption">
QPolygonEditor</div></div>
 </li>
</ul>
<h2><a class="anchor" id="files"></a>
Fichiers mis à votre disposition</h2>
<p>Vous avez à votre disposition les fichiers suivants :</p><ul>
<li>un fichier <code>zip</code> contenant :<ul>
<li>la présente documentation</li>
<li>la librairie <code>SpaceShuttleLib</code> (version release et debug)</li>
<li>un exemple d'exécutable</li>
<li>le fichier Excel à remplir</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="shuttle_creation"></a>
Création d'une navette</h2>
<p>Le code suivant est un exemple complet permettant de créer une navette. Il correspond à la création de la navette <em>Horizon 6t K-Shuttle</em> donné en exemple. Ce code n'est qu'à titre indicatif et sert à mieux comprendre la structure d'une navette.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> generate_Horizon_6t_k()</div><div class="line">{</div><div class="line">   qreal size{ mShuttleEditor-&gt;outputScale() };</div><div class="line"></div><div class="line">   <span class="comment">// Step 1 - Build shuttle with a polygonal shape (instead of the default circular shape)</span></div><div class="line">   mShuttle = <span class="keyword">new</span> <a class="code" href="class_q_shuttle.html">QShuttle</a>(<span class="keyword">new</span> <a class="code" href="class_q_polygonal_body.html">QPolygonalBody</a>);</div><div class="line"></div><div class="line">   <span class="comment">// Step 1.1 - Assign shuttle to the scene model</span></div><div class="line">   mSceneModel.setOneShuttle(mShuttle);</div><div class="line"></div><div class="line">   <span class="comment">// Step 1.2 - Create the polygon for the body</span></div><div class="line">   <span class="comment">// Step 1.2.1 - Create unit polygon</span></div><div class="line">   QPolygonF shutteShape;</div><div class="line">   shutteShape &lt;&lt; QPointF(1.000000, 0.000000)</div><div class="line">               &lt;&lt; QPointF(1.000000, -0.069444)</div><div class="line">               &lt;&lt; QPointF(0.930556, -0.069444)</div><div class="line">               &lt;&lt; QPointF(0.868056, -0.111111)</div><div class="line">               &lt;&lt; QPointF(0.791667, -0.208333)</div><div class="line">               &lt;&lt; QPointF(0.791667, -0.277778)</div><div class="line">               &lt;&lt; QPointF(0.743056, -0.298611)</div><div class="line">               &lt;&lt; QPointF(0.694444, -0.277778)</div><div class="line">               &lt;&lt; QPointF(0.694444, -0.208333)</div><div class="line">               &lt;&lt; QPointF(0.597222, -0.138889)</div><div class="line">               &lt;&lt; QPointF(0.395833, -0.180556)</div><div class="line">               &lt;&lt; QPointF(0.354167, -0.298611)</div><div class="line">               &lt;&lt; QPointF(0.354167, -0.388889)</div><div class="line">               &lt;&lt; QPointF(0.270833, -0.409722)</div><div class="line">               &lt;&lt; QPointF(0.180556, -0.388889)</div><div class="line">               &lt;&lt; QPointF(0.180556, -0.305556)</div><div class="line">               &lt;&lt; QPointF(0.138889, -0.180556)</div><div class="line">               &lt;&lt; QPointF(0.069444, -0.138889)</div><div class="line">               &lt;&lt; QPointF(0.000000, -0.138889)</div><div class="line">               &lt;&lt; QPointF(0.000000, 0.000000)</div><div class="line">               &lt;&lt; QPointF(0.000000, 0.138889)</div><div class="line">               &lt;&lt; QPointF(0.069444, 0.138889)</div><div class="line">               &lt;&lt; QPointF(0.138889, 0.180556)</div><div class="line">               &lt;&lt; QPointF(0.180556, 0.305556)</div><div class="line">               &lt;&lt; QPointF(0.180556, 0.388889)</div><div class="line">               &lt;&lt; QPointF(0.270833, 0.409722)</div><div class="line">               &lt;&lt; QPointF(0.354167, 0.388889)</div><div class="line">               &lt;&lt; QPointF(0.354167, 0.298611)</div><div class="line">               &lt;&lt; QPointF(0.395833, 0.180556)</div><div class="line">               &lt;&lt; QPointF(0.597222, 0.138889)</div><div class="line">               &lt;&lt; QPointF(0.694444, 0.208333)</div><div class="line">               &lt;&lt; QPointF(0.694444, 0.277778)</div><div class="line">               &lt;&lt; QPointF(0.743056, 0.298611)</div><div class="line">               &lt;&lt; QPointF(0.791667, 0.277778)</div><div class="line">               &lt;&lt; QPointF(0.791667, 0.208333)</div><div class="line">               &lt;&lt; QPointF(0.868056, 0.111111)</div><div class="line">               &lt;&lt; QPointF(0.930556, 0.069444)</div><div class="line">               &lt;&lt; QPointF(1.000000, 0.069444)</div><div class="line">               &lt;&lt; QPointF(1.000000, 0.000000);</div><div class="line">   shutteShape.translate(-0.5, 0.0);</div><div class="line">   size *= 2.0;</div><div class="line">   <span class="comment">// Step 1.2.2 - Scaling the polygon</span></div><div class="line">   <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp; point : shutteShape) {</div><div class="line">       point *= size;</div><div class="line">   }</div><div class="line">   <span class="comment">// Step 1.2.3 - Assigning the polygon</span></div><div class="line">   <span class="keyword">static_cast&lt;</span><a class="code" href="class_q_polygonal_body.html">QPolygonalBody</a>*<span class="keyword">&gt;</span>(mShuttle-&gt;shape())-&gt;setPolygon(shutteShape);</div><div class="line"></div><div class="line">   <span class="comment">// Step 1.3 - Defining the shape name and color</span></div><div class="line">   mShuttle-&gt;setName(<span class="stringliteral">&quot;Horizon 6t K-Shuttle&quot;</span>);</div><div class="line">   mShuttle-&gt;shape()-&gt;<a class="code" href="class_q_shape_body.html#aaad03b1cc1e93db080bc4244f2af4990">setBrush</a>(QColor(95, 125, 185));</div><div class="line">   mShuttle-&gt;shape()-&gt;setPen(QPen(QColor(50, 70, 115), 1.0));</div><div class="line"></div><div class="line">   <span class="comment">// Step 1.4 - Adding the shuttle controller</span></div><div class="line">   mShuttleController = <span class="keyword">new</span> <a class="code" href="class_q_shuttle_keyboard_controller.html">QShuttleKeyboardController</a>;</div><div class="line">   mShuttle-&gt;setController(mShuttleController);</div><div class="line"></div><div class="line">   <span class="comment">// Step 1.5 - Centering and orienting the shuttle</span></div><div class="line">   mShuttle-&gt;setLinearPosition(QPointF(mSceneSize.width() / 2.0, mSceneSize.height() / 2.0));</div><div class="line">   mShuttle-&gt;setAngularPosition(0.0);</div><div class="line"></div><div class="line">   <span class="comment">// Step 2 - Creating the fuel tank with width and height</span></div><div class="line">   mShuttleFuelTank = <span class="keyword">new</span> <a class="code" href="class_q_shuttle_fuel_tank.html">QShuttleFuelTank</a>(size / 12.5, size / 2.0);</div><div class="line"></div><div class="line">   <span class="comment">// Step 2.1 - Assigning the brush and pen of the tank</span></div><div class="line">   mShuttleFuelTank-&gt;shape()-&gt;setBrush(QColor(128, 128, 128));</div><div class="line">   mShuttleFuelTank-&gt;shape()-&gt;setPen(QPen(Qt::black, 1.0));</div><div class="line"></div><div class="line">   <span class="comment">// Step 2.2 - Assigning the fuel color</span></div><div class="line">   mShuttleFuelTank-&gt;setFuelColor(QColor(196, 255, 0));</div><div class="line"></div><div class="line">   <span class="comment">// Step 2.3 - Set capacity and fill it</span></div><div class="line">   mShuttleFuelTank-&gt;setCapacity(500000.0);</div><div class="line">   mShuttleFuelTank-&gt;fill();</div><div class="line"></div><div class="line">   <span class="comment">// Step 2.4 - Add the tank to the shuttle</span></div><div class="line">   mShuttle-&gt;addFuelTank(mShuttleFuelTank, QPointF(size / 3.0 - 0.5 * size, 0.0), <a class="code" href="struct_trigo.html">Trigo&lt;&gt;::deg2rad</a>(90.0));</div><div class="line"></div><div class="line">   <span class="comment">// Step 3 - Create and add all thrusters</span></div><div class="line">   QBrush thrusterBrush(QColor(128, 128, 128));</div><div class="line">   QPen thrusterPen(QPen(Qt::white, 0.5));</div><div class="line">   qreal flowRate{ 100.0 };</div><div class="line">   qreal ejectSpeed{ 100.0 };</div><div class="line">   addNewThruster(&amp;mSceneModel, mShuttleFuelTank, size / 2.5, flowRate, ejectSpeed, static_cast&lt;QPolygonalBody*&gt;(mShuttle-&gt;shape())-&gt;polygon()[19],   0.0, thrusterBrush, thrusterPen, QKeySequence(<span class="stringliteral">&quot;5&quot;</span>));</div><div class="line">   addNewThruster(&amp;mSceneModel, mShuttleFuelTank, size / 5.5, flowRate, ejectSpeed, static_cast&lt;QPolygonalBody*&gt;(mShuttle-&gt;shape())-&gt;polygon()[25], -90.0, thrusterBrush, thrusterPen, QKeySequence(<span class="stringliteral">&quot;4&quot;</span>));</div><div class="line">   addNewThruster(&amp;mSceneModel, mShuttleFuelTank, size / 5.5, flowRate, ejectSpeed, static_cast&lt;QPolygonalBody*&gt;(mShuttle-&gt;shape())-&gt;polygon()[13],  90.0, thrusterBrush, thrusterPen, QKeySequence(<span class="stringliteral">&quot;6&quot;</span>));</div><div class="line">   addNewThruster(&amp;mSceneModel, mShuttleFuelTank, size / 5.5, flowRate, ejectSpeed, static_cast&lt;QPolygonalBody*&gt;(mShuttle-&gt;shape())-&gt;polygon()[0],  180.0, thrusterBrush, thrusterPen, QKeySequence(<span class="stringliteral">&quot;8&quot;</span>));</div><div class="line">   addNewThruster(&amp;mSceneModel, mShuttleFuelTank, size / 7.5, flowRate, ejectSpeed, static_cast&lt;QPolygonalBody*&gt;(mShuttle-&gt;shape())-&gt;polygon()[32], -90.0, thrusterBrush, thrusterPen, QKeySequence(<span class="stringliteral">&quot;7&quot;</span>));</div><div class="line">   addNewThruster(&amp;mSceneModel, mShuttleFuelTank, size / 7.5, flowRate, ejectSpeed, static_cast&lt;QPolygonalBody*&gt;(mShuttle-&gt;shape())-&gt;polygon()[6],  90.0, thrusterBrush, thrusterPen, QKeySequence(<span class="stringliteral">&quot;9&quot;</span>));</div><div class="line"></div><div class="line">   <span class="comment">// to do - Update all custom widget and interface...</span></div><div class="line">   <span class="comment">// ...</span></div><div class="line">   <span class="comment">// ...</span></div><div class="line">   <span class="comment">// ...  </span></div><div class="line">   mSceneViewController-&gt;update();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> addNewThruster(<a class="code" href="class_q_scene_model.html">QSceneModel</a> * model,</div><div class="line">                   <a class="code" href="class_q_shuttle_fuel_tank.html">QShuttleFuelTank</a> * fuelTank,</div><div class="line">                   qreal thrusterSize,</div><div class="line">                   qreal massFlowRate,</div><div class="line">                   qreal massEjectSpeed,</div><div class="line">                   QPointF <span class="keyword">const</span> &amp; position,</div><div class="line">                   qreal orientationDegrees,</div><div class="line">                   QBrush <span class="keyword">const</span> &amp; brush,</div><div class="line">                   QPen <span class="keyword">const</span> &amp; pen,</div><div class="line">                   QKeySequence <span class="keyword">const</span> &amp; key)</div><div class="line">{</div><div class="line">   <span class="comment">// Step 1 - Build thruster with a polygonal shape (instead of the default circular shape) </span></div><div class="line">   <a class="code" href="class_q_shuttle_thruster.html">QShuttleThruster</a> * thruster = <span class="keyword">new</span> <a class="code" href="class_q_shuttle_thruster.html">QShuttleThruster</a>(<span class="keyword">new</span> <a class="code" href="class_q_polygonal_body.html">QPolygonalBody</a>);</div><div class="line">   <span class="comment">// Step 2 - Assign the polygonal shape - in this case, we use an equilateral polygon</span></div><div class="line">   <span class="keyword">static_cast&lt;</span><a class="code" href="class_q_polygonal_body.html">QPolygonalBody</a>*<span class="keyword">&gt;</span>(thruster-&gt;<a class="code" href="class_q_physical_body.html#a8cb462bc22720ed99c2151b868921247">shape</a>())-&gt;setPolygon(QPolygonFactory::equilateralPolygon(3, thrusterSize, 0.0));</div><div class="line">   <span class="comment">// Step 3 - Assign brush and pen to the shape</span></div><div class="line">   thruster-&gt;<a class="code" href="class_q_physical_body.html#a8cb462bc22720ed99c2151b868921247">shape</a>()-&gt;<a class="code" href="class_q_shape_body.html#aaad03b1cc1e93db080bc4244f2af4990">setBrush</a>(brush);</div><div class="line">   thruster-&gt;<a class="code" href="class_q_physical_body.html#a8cb462bc22720ed99c2151b868921247">shape</a>()-&gt;<a class="code" href="class_q_shape_body.html#a469edb76b8ceb1bad7dcf9eb3825ea5d">setPen</a>(pen);</div><div class="line">   <span class="comment">// Step 4 - Assign model to the thruster</span></div><div class="line">   thruster-&gt;setSceneModel(model);</div><div class="line">   <span class="comment">// Step 5 - Assign the fuel tank</span></div><div class="line">   thruster-&gt;linkToFuelTank(fuelTank);</div><div class="line">   <span class="comment">// Step 6 - Set flow rate and eject speed</span></div><div class="line">   thruster-&gt;setThrusterEfficiency(massFlowRate, massEjectSpeed);</div><div class="line">   <span class="comment">// Step 7 - Create and assign the keyboard controller</span></div><div class="line">   thruster-&gt;setController(<span class="keyword">new</span> <a class="code" href="class_q_thruster_keyboard_controller.html">QThrusterKeyboardController</a>(key));</div><div class="line">   <span class="comment">// Step 8 - Assign the thruster to the shuttle</span></div><div class="line">   mShuttle-&gt;addThruster(thruster, position, <a class="code" href="struct_trigo.html">Trigo&lt;&gt;::deg2rad</a>(orientationDegrees));</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="database"></a>
Base de données</h1>
<p>Pour la deuxième partie du projet, vous avez à produire les différentes opérations traditionnelles d'interaction avec une base de données afin d'y stocker l'information d'une navette :</p><ul>
<li>insertion</li>
<li>suppression</li>
<li>édition</li>
<li>sélection</li>
</ul>
<p>On vous impose une approche très précise pour la réalisation de cette partie :</p><ol type="1">
<li>la structure de la base de données est imposée</li>
<li>vous devez utiliser certaines classe d'interface spécifique</li>
</ol>
<p>En fait, on vous demande d'utliser encore le polymorphisme dans l'objectif de rester indépendant de la base de données. Par conséquent, vous aurez à votre disposition une classe abstraite de base servant d'interface générique à un SGBD. Ainsi, vous réaliserez une implémentation spécifique pour la base de données <code>PostgreSql</code> en héritant de la première. De cette façon, vous pourriez réaliser une autre classe implémentant une interface pour une autre base de données (<code>MySQL</code> ou <code>Oracle</code> par exemple) et votre application y serait complètement transparente.</p>
<p>Vous devez utiliser les classes suivantes :</p><ul>
<li><code>QShuttleDatabase</code> : classe abstraite de base servant d'interface à une base de données</li>
<li><code>QShuttlePostgresqlDatabase</code> : classe dérivée étant l'implémentation d'une interface concrète</li>
</ul>
<p>Vous remarquerez que plusieurs tâches sont déjà effectuées dans la classe <code>QShuttlePostgresqlDatabase</code> :</p><ul>
<li><code>connect</code></li>
<li><code>availableShuttles</code></li>
<li><code>isShuttleExists</code></li>
<li><code>insertShuttle</code></li>
</ul>
<p>Vous devez compléter les 3 tâches restantes, soit les fonctions :</p><ul>
<li><code>updateShuttle</code> : fonction mettant à jour une navette existante</li>
<li><code>retrieveShuttle</code> : fonction faisant l'extraction de toutes les données d'une navette provenant de la base de données</li>
<li><code>deleteShuttle</code> : fonction faisant la suppression d'une navette existante dans la base de données</li>
</ul>
<p>Le <b>schéma de table</b> se trouve au début du fichier <code>QShuttleDatabase.h</code>. Les contraintes indiquées doivent être respectées.</p>
<h1><a class="anchor" id="deliverable"></a>
Livrables</h1>
<p>Vous devez produire le code source complet d'un éditeur fonctionnel en respectant toutes les contraintes données.</p>
<p>Vous devez produire un fichier <code>zip</code> contenant :</p><ul>
<li>votre code nettoyé;</li>
<li>le script sql de création de la bd;</li>
<li>un dump de votre bd ayant au moins une navette intéressante;</li>
<li>le fichier Excel d'auto évaluation de l'équipe.</li>
</ul>
<p>Une seule remise pas équipe est demandée.</p>
<p>Pour faire le dump, voici un example de commande à exécuter sur la console :</p><ul>
<li><code>pg_dump --host=localhost --port=5432 --username=postgres --password --table=Shuttle --table=Shape --table=FuelTank --table=Thruster postgres &gt; d:\MyDump.txt</code> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
